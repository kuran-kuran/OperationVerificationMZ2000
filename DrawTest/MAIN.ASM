	ORG 012A0h
	JP	START
	DS	253 ; STACKエリア
START:
	LD	SP, START

; 割り込み禁止
	DI

; 8255 初期化
	LD	A, 082h		; 8255 A=out B=in C=out
	OUT	(0E3H), A
	LD	A, 058h		; b3:BST=1 b4:OPEN=1 b6:WRITE=1
	OUT	(0E2H), A
;
; PIO 初期化
;	LD	A, 00Fh		; PIO A=out
;	OUT	(0E9H), A
;	LD	A, 0CFh		; PIO B=in
;	OUT	(0EBH), A
;	LD	A, 0FFh
;	OUT	(0EBH), A

; テキスト初期化
	LD	A, 80
	CALL	WIDTH
	CALL	ENABLE_TEXT_VRAM_ADDR

; グラフィック優先、文字色白
	LD	A, 07h
	OUT	(0F5h), A
; 背景色黒
	LD	A, 0
	OUT	(0F4h), A

; テキストクリア
	CALL	CLS

; 左上指定
	LD	DE, 0
	CALL	CURSOR

; メッセージ表示
	LD	HL, MSG
	CALL	PRINT_MSG

; 改行
	CALL	NEW_LINE

; グラフィック表示初期化
	LD	A, 7
	OUT	(0F6h), A
	IN	A, (0E0h)
	SET	4, A
	OUT	(0E0h), A

; G-VRAM有効
	CALL	ENABLE_GRAPHIC_ADDR

; グラフィック画面クリア
	CALL	GRAPHICS_CLS_ALL

; ソルバルウ表示
; 青
	LD	A, 1
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 16 + 2
	LD	HL, SOLVALOU_B
	CALL	PUT32x16
; 赤
	LD	A, 2
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 16 + 2
	LD	HL, SOLVALOU_R
	CALL	PUT32x16
; 緑
	LD	A, 3
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 16 + 2
	LD	HL, SOLVALOU_G
	CALL	PUT32x16

; ソルバルウ表示
; 青
	LD	A, 1
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 32 + 6
	LD	HL, SOLVALOU_B
	CALL	PUT32x16
; 赤
	LD	A, 2
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 48 + 10
	LD	HL, SOLVALOU_R
	CALL	PUT32x16
; 緑
	LD	A, 3
	OUT	(0F7h), A
	LD	DE, 0C000h + 80 * 64 + 14
	LD	HL, SOLVALOU_G
	CALL	PUT32x16

; G-VRAM無効
	CALL	DISABLE_GRAPHIC_ADDR

	HALT

INCLUDE "UTIL.ASM"
INCLUDE "TEXT.ASM"
INCLUDE "GRAPHIC.ASM"
INCLUDE "PRINTER.ASM"
INCLUDE "DISK.ASM"
;INCLUDE "lzdec.mac"

MSG:
	DB	"MZ-2000 DrawTest by kuran-kuran",0

; ソルバルウ
SOLVALOU:
SOLVALOU_MASK:
	; solvalou_mask
	; 32 x 16 dot
	DW 03FFFh, 0FFFCh, 00FFFh, 0FFF0h, 00FFFh, 0FFF0h, 00FFFh, 0FFF0h, 000FFh, 0FF00h, 000FFh, 0FF00h, 000FFh, 0FF00h, 0003Fh, 0FC00h
	DW 0000Fh, 0F000h, 00003h, 0C000h, 00000h, 00000h, 00000h, 00000h, 00000h, 00000h, 00000h, 00000h, 00C00h, 00030h, 00FCFh, 0F3F0h
	; solvalou
	; 32 x 16 dot
	; Blue data
SOLVALOU_B:
	DW 0C000h, 00003h, 0F000h, 0000Fh, 0F000h, 0000Fh, 0F000h, 0000Fh, 0FF00h, 000FFh, 0FF00h, 000FFh, 0FF00h, 000FCh, 0FFC0h, 003FFh
	DW 0FFF0h, 00FFFh, 0FFFCh, 03FFFh, 0FFFFh, 0FFFFh, 03FFFh, 0FFFCh, 0FFFFh, 0FFFFh, 0FFFFh, 0FFFFh, 0F3FFh, 0FFCFh, 0F030h, 00C0Fh
	; Red data
SOLVALOU_R:
	DW 04000h, 00001h, 0F000h, 0000Bh, 03000h, 00004h, 03000h, 00008h, 03F00h, 00044h, 03000h, 00008h, 0BB00h, 00047h, 0F7C0h, 0008Bh
	DW 0FB30h, 00447h, 0F7CCh, 0208Bh, 0FBF3h, 04447h, 0F733h, 0888Bh, 0FB33h, 04C47h, 0FF33h, 08C8Bh, 00333h, 04C40h, 0F030h, 00C0Ah
	; Green data
SOLVALOU_G:
	DW 0C000h, 00003h, 0F000h, 0000Fh, 07000h, 0000Dh, 0B000h, 0000Ch, 07F00h, 000ECh, 0B000h, 0001Ch, 0FF00h, 000ECh, 0FFC0h, 001DFh
	DW 0FF30h, 00ECFh, 0FFCCh, 035CFh, 0FFF3h, 0CECFh, 03F73h, 0CDCCh, 0FFB3h, 0CECFh, 0FF73h, 0CDCFh, 083B3h, 0CECAh, 0F030h, 00C0Fh

	END 012A0h
